{"version":3,"file":"lesson-12-main-CU8MRO4i.js","sources":["../../src/js/lessons-12/pixabay-api.js","../../src/js/lessons-12/refs-les12.js","../../src/js/lessons-12/render-function.js","../../src/js/lesson-12-main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport async function getPhotos(query, page) {\n  const BASE_URL = 'https://pixabay.com/api/?';\n  const API_KEY = '45713433-433c1b648e48abad27090f3cc';\n\n\n  try {\n    const responce = await axios.get(`${BASE_URL}`, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: false,\n        per_page: '15',\n        page,\n      }\n    })\n    return responce.data.hits\n  } catch (error) {\n    console.log('Помилка при завантаженні фото:', error)\n  }\n}\n","export const  refsLes12 = {\n  searchForm: document.querySelector('.search-form'),\n  startSearchBtn: document.querySelector('.js-start-search'),\n  galleryEl: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  moreSearchBtn: document.querySelector('.js-search-more')\n}","export function createMarkupGallery(data) {\n  const markupGallery = data.map(item => {\n    const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = item;\n    return `\n            <li class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                  class=\"gallery-image\"\n                  src=\"${webformatURL}\"\n                  alt=\"${tags}\"\n                  loading=\"lazy\"\n              /></a>\n              <ul class=\"img-content-wrapper\">\n                <li class=\"img-content-descr\">Likes<span>${likes}</span></li>\n                <li class=\"img-content-descr\">Views<span>${views}</span></li>\n                <li class=\"img-content-descr\">Comments<span>${comments}</span></li>\n                <li class=\"img-content-descr\">Downloads<span>${downloads}</span></li>\n              </ul>\n            </li>\n      `;\n  }).join(''); \n\n  return markupGallery;\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport { getPhotos } from \"./lessons-12/pixabay-api\";\nimport { refsLes12 } from \"./lessons-12/refs-les12\";\nimport { createMarkupGallery } from \"./lessons-12/render-function\";\n\nrefsLes12.searchForm.addEventListener('submit', sumbitFormSearch)\n\n\nasync function sumbitFormSearch(event) {\n  event.preventDefault(); // Зупиняємо стандартну поведінку форми\n\n  refsLes12.galleryEl.innerHTML = ''; // Очищуємо галерею перед новим пошуком\n  const query = event.target.search.value; // Отримуємо значення з поля пошуку\n\n  refsLes12.loader.classList.remove('visually-hidden'); // Показуємо лоадер\n\n  try {\n    // Викликаємо функцію getPhotos з запитом\n    const photos = await getPhotos(query);\n\n    // Перевіряємо, чи є результати\n    if (photos.length === 0) {\n      iziToast.show({\n        title: '❌', \n        message: `Sorry, there are no images matching your search \"${query}\". Please try again!`,\n        color: 'red',\n        backgroundColor: '#ffcccc',\n        position: 'topRight',\n        timeout: 5000,\n        close: true,\n        pauseOnHover: true,\n        progressBar: true,\n      });\n      return; // Якщо немає результатів, виходимо з функції\n    }\n\n    // Створюємо розмітку галереї з отриманих фото\n    const markup = createMarkupGallery(photos);\n    refsLes12.galleryEl.insertAdjacentHTML('afterbegin', markup); // Додаємо розмітку в галерею\n\n    // Ініціалізуємо SimpleLightbox\n    const gallery = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    \n    // Оновлюємо галерею при показі\n    gallery.on('show.simplelightbox', function () {\n      gallery.refresh();\n    });\n\n  } catch (error) {\n    // Обробка помилки при виконанні запиту\n    iziToast.show({\n      title: 'Помилка',\n      message: 'Щось пішло не так, спробуйте ще раз пізніше.',\n      color: 'red',\n      position: 'topRight',\n      timeout: 5000,\n    });\n  } finally {\n    // Сховати лоадер в будь-якому випадку\n    refsLes12.loader.classList.add('visually-hidden');\n  }\n}\n\n"],"names":["getPhotos","query","page","BASE_URL","API_KEY","axios","error","refsLes12","createMarkupGallery","data","item","webformatURL","largeImageURL","tags","likes","views","comments","downloads","sumbitFormSearch","event","photos","iziToast","markup","gallery","SimpleLightbox"],"mappings":"uDAEO,eAAeA,EAAUC,EAAOC,EAAM,CAC3C,MAAMC,EAAW,4BACXC,EAAU,qCAGhB,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAI,GAAGF,CAAQ,GAAI,CAC9C,OAAQ,CACN,IAAKC,EACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,KACV,KAAAC,CACD,CACP,CAAK,GACe,KAAK,IACtB,OAAQI,EAAO,CACd,QAAQ,IAAI,iCAAkCA,CAAK,CACpD,CACH,CCvBO,MAAOC,EAAY,CACxB,WAAY,SAAS,cAAc,cAAc,EACjD,eAAgB,SAAS,cAAc,kBAAkB,EACzD,UAAW,SAAS,cAAc,UAAU,EAC5C,OAAQ,SAAS,cAAc,SAAS,EACxC,cAAe,SAAS,cAAc,iBAAiB,CACzD,ECNO,SAASC,EAAoBC,EAAM,CAsBxC,OArBsBA,EAAK,IAAIC,GAAQ,CACrC,KAAM,CAAE,aAAAC,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,EAAGP,EACjF,MAAO;AAAA;AAAA,8CAEmCE,CAAa;AAAA;AAAA;AAAA,yBAGlCD,CAAY;AAAA,yBACZE,CAAI;AAAA;AAAA;AAAA;AAAA,2DAI8BC,CAAK;AAAA,2DACLC,CAAK;AAAA,8DACFC,CAAQ;AAAA,+DACPC,CAAS;AAAA;AAAA;AAAA,OAIxE,CAAG,EAAE,KAAK,EAAE,CAGZ,CCdAV,EAAU,WAAW,iBAAiB,SAAUW,CAAgB,EAGhE,eAAeA,EAAiBC,EAAO,CACrCA,EAAM,eAAc,EAEpBZ,EAAU,UAAU,UAAY,GAChC,MAAMN,EAAQkB,EAAM,OAAO,OAAO,MAElCZ,EAAU,OAAO,UAAU,OAAO,iBAAiB,EAEnD,GAAI,CAEF,MAAMa,EAAS,MAAMpB,EAAUC,CAAK,EAGpC,GAAImB,EAAO,SAAW,EAAG,CACvBC,EAAS,KAAK,CACZ,MAAO,IACP,QAAS,oDAAoDpB,CAAK,uBAClE,MAAO,MACP,gBAAiB,UACjB,SAAU,WACV,QAAS,IACT,MAAO,GACP,aAAc,GACd,YAAa,EACrB,CAAO,EACD,MACD,CAGD,MAAMqB,EAASd,EAAoBY,CAAM,EACzCb,EAAU,UAAU,mBAAmB,aAAce,CAAM,EAG3D,MAAMC,EAAU,IAAIC,EAAe,aAAc,CAC/C,aAAc,MACd,aAAc,GACpB,CAAK,EAGDD,EAAQ,GAAG,sBAAuB,UAAY,CAC5CA,EAAQ,QAAO,CACrB,CAAK,CAEF,MAAe,CAEdF,EAAS,KAAK,CACZ,MAAO,UACP,QAAS,+CACT,MAAO,MACP,SAAU,WACV,QAAS,GACf,CAAK,CACL,QAAY,CAERd,EAAU,OAAO,UAAU,IAAI,iBAAiB,CACjD,CACH"}